diff --git a/FWCore/Catalog/test/BuildFile.xml b/FWCore/Catalog/test/BuildFile.xml
index a638653..c657da5 100644
--- a/FWCore/Catalog/test/BuildFile.xml
+++ b/FWCore/Catalog/test/BuildFile.xml
@@ -3,4 +3,5 @@
 <use   name="FWCore/ServiceRegistry"/>
 <use   name="FWCore/ParameterSetReader"/>
 <bin   name="edmCatalogFileLocator_t" file="FileLocator_t.cpp">
+<flags NO_TESTRUN="1"/>
 </bin>
diff --git a/FWCore/Framework/test/stubs/TestModuleChangeLooper.cc b/FWCore/Framework/test/stubs/TestModuleChangeLooper.cc
index 6224f9b..bd61680 100644
--- a/FWCore/Framework/test/stubs/TestModuleChangeLooper.cc
+++ b/FWCore/Framework/test/stubs/TestModuleChangeLooper.cc
@@ -53,7 +53,8 @@ public:
     edm::ParameterSet newPSet(*pset);
     newPSet.addParameter<int>("ivalue", ++m_expectedValue);
 
-    assert(moduleChanger()->changeModule(m_tag.label(), newPSet));
+    auto success = moduleChanger()->changeModule(m_tag.label(), newPSet);
+    assert(success && "moduleChanger()->changeModule(m_tag.label(), newPSet)");
 
     return iCount == 2 ? kStop : kContinue;
   }
diff --git a/FWCore/Integration/test/run_ParameterSet.sh b/FWCore/Integration/test/run_ParameterSet.sh
index 483c21a..9c935a7 100755
--- a/FWCore/Integration/test/run_ParameterSet.sh
+++ b/FWCore/Integration/test/run_ParameterSet.sh
@@ -29,6 +29,7 @@ pushd ${LOCAL_TMP_DIR}
   echo edmWriteConfigs ------------------------------------------------------------
   edmWriteConfigs pluginTestProducerWithPSetDesc.so || die "edmWriteConfigs pluginTestProducerWithPSetDesc.so" $?
 
+if [ -f FWCore/Integration/test/ProducerWithPSetDesc.cc ]; then
 # Make sure we can run using the cfi file generated in the previous process
   echo cmsRun runAutoGeneratedCfi_cfg.py ------------------------------------------------------------
   cmsRun -p ${LOCAL_TEST_DIR}/runAutoGeneratedCfi_cfg.py || die "cmsRun runAutoGeneratedCfi_cfg.py" $?
@@ -75,7 +76,7 @@ pushd ${LOCAL_TMP_DIR}
   echo cmsRun importRestrictions3.py ------------------------------------------------------------
   cmsRun -p ${LOCAL_TEST_DIR}/importRestrictions3.py 2> importRestrictions3.txt
   grep "Event 2" importRestrictions3.txt || die " cmsRun importRestrictions3.py" $?
-
+fi
 
 popd
 
diff --git a/FWCore/Integration/test/run_TestSwitchProducer.sh b/FWCore/Integration/test/run_TestSwitchProducer.sh
index 422303d..f0ebfca 100755
--- a/FWCore/Integration/test/run_TestSwitchProducer.sh
+++ b/FWCore/Integration/test/run_TestSwitchProducer.sh
@@ -13,7 +13,7 @@ pushd ${LOCAL_TMP_DIR}
   echo "*************************************************"
   echo "SwitchProducer in a Task, case test2 disabled"
   cmsRun ${LOCAL_TEST_DIR}/${test}Task_cfg.py disableTest2 || die "cmsRun ${test}Task_cfg.py 2" $?
-
+if [ -d PhysicsTools/Utilities/scripts ]; then
   echo "*************************************************"
   echo "Merge outputs"
   edmCopyPickMerge outputFile=testSwitchProducerMerge1.root inputFiles=file:testSwitchProducerTask1.root inputFiles=file:testSwitchProducerTask2.root || die "edmCopyPickMerge 1" $?
@@ -61,7 +61,7 @@ pushd ${LOCAL_TMP_DIR}
 
   echo "SwitchProducer tests succeeded"
   echo "*************************************************"
-
+fi
 popd
 
 exit 0
diff --git a/FWCore/MessageService/test/BuildFile.xml b/FWCore/MessageService/test/BuildFile.xml
index 449e5d6..69ec3e3 100644
--- a/FWCore/MessageService/test/BuildFile.xml
+++ b/FWCore/MessageService/test/BuildFile.xml
@@ -170,6 +170,9 @@
 </environment>
 <bin   file="standAloneTest.cpp" name="standAloneWithMessageLogger">
   <use   name="FWCore/MessageLogger"/>
+  <flags NO_TESTRUN="1"/>
+</bin>
+<bin   file="testRunner.cpp" name="standAloneWithMessageLoggerRunner">
   <flags   TEST_RUNNER_ARGS=" /bin/bash FWCore/MessageService/test standAlone_1.sh"/>
 </bin>
 <bin   file="trivial_main.cpp">
diff --git a/FWCore/MessageService/test/standAloneTest.cpp b/FWCore/MessageService/test/standAloneTest.cpp
index e336830..2d2e146 100644
--- a/FWCore/MessageService/test/standAloneTest.cpp
+++ b/FWCore/MessageService/test/standAloneTest.cpp
@@ -1,3 +1,4 @@
+#define EDM_ML_DEBUG
 #include "FWCore/MessageLogger/interface/MessageLogger.h"
 
 namespace edmtest {
diff --git a/FWCore/MessageService/test/unit_test_outputs/standAloneWithMessageLogger.cerr b/FWCore/MessageService/test/unit_test_outputs/standAloneWithMessageLogger.cerr
index 0b387f4..638208e 100644
--- a/FWCore/MessageService/test/unit_test_outputs/standAloneWithMessageLogger.cerr
+++ b/FWCore/MessageService/test/unit_test_outputs/standAloneWithMessageLogger.cerr
@@ -17,11 +17,11 @@ LogProblem  was used to send cat_A
 LogProblem  was used to send cat_B
 threshold DEBUG
 %MSG-d cat_A: 
- standAloneTest.cpp:8
+ standAloneTest.cpp:7
 LogDebug    was used to send cat_A
 %MSG
 %MSG-d cat_B: 
- standAloneTest.cpp:9
+ standAloneTest.cpp:8
 LogDebug    was used to send cat_B
 %MSG
 LogTrace    was used to send cat_A
diff --git a/IOPool/Input/test/TestPoolInput.sh b/IOPool/Input/test/TestPoolInput.sh
index a6ceaf7..295d386 100755
--- a/IOPool/Input/test/TestPoolInput.sh
+++ b/IOPool/Input/test/TestPoolInput.sh
@@ -72,6 +72,8 @@ for dir in $(echo $CMSSW_SEARCH_PATH | tr : '\n') ;  do
   fi
 done
 
+
+if [ -d ${IOPoolInputData}/IOPool/Input/data ]; then
 for file in ${IOPoolInputData}/IOPool/Input/data/raw*.root
 do
   cmsRun ${LOCAL_TEST_DIR}/test_old_raw_data_step1_cfg.py "$file" || die "Failed to read old raw data file $file" $?
@@ -111,6 +113,7 @@ cmsRun ${LOCAL_TEST_DIR}/test_reduced_ProcessHistory_cfg.py merged_files.root ||
 cmsRun ${LOCAL_TEST_DIR}/test_reduced_ProcessHistory_dup_cfg.py merged_files.root || die 'Failure using test_reduced_ProcessHistory_dup_cfg.py' $?
 
 cmsRun ${LOCAL_TEST_DIR}/test_reduced_ProcessHistory_end_cfg.py merged_files.root || die 'Failure using test_reduced_ProcessHistory_end_cfg.py' $?
+fi
 
 cmsRun ${LOCAL_TEST_DIR}/test_make_multi_lumi_cfg.py || die 'Failure using test_make_multi_lumi_cfg.py' $?
 cmsRun ${LOCAL_TEST_DIR}/test_read_multi_lumi_as_one_cfg.py || die 'Failure using test_read_multi_lumi_as_one_cfg.py' $?
diff --git a/Utilities/StorageFactory/test/BuildFile.xml b/Utilities/StorageFactory/test/BuildFile.xml
index 27329ac..e2595d0 100644
--- a/Utilities/StorageFactory/test/BuildFile.xml
+++ b/Utilities/StorageFactory/test/BuildFile.xml
@@ -22,8 +22,10 @@
   <flags NO_TESTRUN="1"/>
 </bin>
 <bin   file="rfio2.cpp" name="test_StorageFactory_Rfio2">
+  <flags NO_TESTRUN="1"/>
 </bin>
 <bin   file="rfio3.cpp" name="test_StorageFactory_Rfio3">
+  <flags NO_TESTRUN="1"/>
 </bin>
 <bin   file="write.cpp" name="test_StorageFactory_Write">
   <flags NO_TESTRUN="1"/>
